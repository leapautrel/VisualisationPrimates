library("sf")
library("ggplot2")
library("rnaturalearth")
library("rnaturalearthdata")
library("Factoshiny")
setwd("C:/Users/mimi/Desktop/M2/Visualisation de données/PROJET/Dataset")
quantitative <- read.csv("ATLANTIC-PR_Quantitative.csv", header = TRUE, sep = ";")
occurrence <- read.csv("ATLANTIC-PR_Occurrence.csv", header = TRUE, sep = ";")
community <- read.csv("ATLANTIC-PR_Community.csv", header = TRUE, sep = ";")
dim(quantitative)
dim(occurrence)
dim(community)
str(occurrence)
str(quantitative)
str(community)
world <- ne_countries(scale = "medium", returnclass = "sf")
amerique_dta <- world  %>% filter(name == '')
library(tidyverse)
library(coursesdata)
data(bats)
bats %>%
as_tibble() %>%
mutate(Diet_fact = as.factor(Diet)) %>%  # control shift M
group_by(Diet) %>%
summarise(n = n())
View(bats)
View(bats)
occurrence %>%
mutate(Species = as.factor(SPECIES)) %>%
group_by(SPECIES) %>%
summarise(n=n())
map <- get_map(location = c(lon = -22, lat = -47),
zoom = 8, maptype = "terrain-background",
source = "stamen")
?get_map
library(ggmap)
map <- get_map(location = c(lon = -22, lat = -47),
zoom = 8, maptype = "terrain-background",
source = "stamen")
ggmap(map)
bar <- donnees %>% ggplot()+aes(x=x, y=y)
world <- ne_countries(scale = "medium", returnclass = "sf")
st_crs(world )
world %>%   filter(brk_name == "United States") %>% st_transform(crs = 2163) %>% ggplot() + geom_sf()
donnees <- data.frame(x = SPECIES, y = n)
donnees <- data.frame(x = SPECIES, y = n)
donnees <- data.frame(x = Species, y = n)
occurrence %>%
mutate(Species = as.factor(SPECIES)) %>%
group_by(SPECIES) %>%
summarise(n=n())
View(occurrence)
View(occurrence)
?mutate
donnees <- data.frame(x = occurrence$SPECIES, y = n)
occurrence %>%
mutate(Species = as.factor(SPECIES)) %>%
group_by(SPECIES) %>%
summarise(n=n())
library(ggplot2)
gg <- bats %>%
ggplot() +
aes(x = BOW,
y = BRW,
col = as.factor(Diet)) +
geom_point() +
labs(x = "Body weight")+
labs(y = "Brain weight")+
labs(color = "Diet")+
theme_light()+ # fond clair
theme_minimal()+ # enleve le cadre autour
theme(legend.position = "bottom")+
geom_smooth(method = "lm",se = FALSE) #permet d'appliquer une régression aux points
gg
bats %>% filter(BOW < 250) %>%
ggplot()+
aes(x = BOW, fill = as.factor(Diet))+
geom_histogram(position = "identity", alpha = 0.5) + # alpha = 0.5 donne la transparence
labs(fill = "Diet", x = "Body weight")+
facet_wrap(~Diet) # on fait 4 graphs comparables car memes gammes de valeurs en abs et en ord
occurrence %>%
mutate(Species = as.factor(SPECIES)) %>%
group_by(SPECIES) %>%
summarise(n=n()) %>%
ggplot()+
aes(x= SPECIES, fill = as.factor(SPECIES))+
geom_bar(position = identity)
occurrence %>%
mutate(Species = as.factor(SPECIES)) %>%
group_by(SPECIES) %>%
summarise(n=n()) %>%
ggplot()+
aes(x= SPECIES, fill = as.factor(SPECIES))+
geom_bar(position = "identity")
occurrence %>%
mutate(Species = as.factor(SPECIES)) %>%
group_by(SPECIES) %>%
summarise(n=n()) %>%
ggplot()+
aes(x= SPECIES, y= n)+
geom_bar(position = "identity")
occurrence %>%
mutate(Species = as.factor(SPECIES)) %>%
group_by(SPECIES) %>%
summarise(n=n()) %>%
ggplot()+
aes(x= SPECIES, y= y)+
geom_bar(position = "identity")
occurrence %>%
mutate(Species = as.factor(SPECIES)) %>%
group_by(SPECIES) %>%
summarise(n=n()) %>%
ggplot()+
aes(x= SPECIES )+
geom_bar(position = "identity")
occurrence %>%
group_by(SPECIES) %>%
summarise(n=n()) %>%
ggplot()+
aes(x= SPECIES )+
geom_bar(position = "identity")
occurrence %>%
group_by(SPECIES) %>%
summarise(n=n())
# ggplot()+
# aes(x= SPECIES )+
# geom_bar(position = "identity")
occurrence %>%
group_by(SPECIES) %>%
summarise(n=n())
ggplot(aes(x= SPECIES, y = n ))+
geom_bar(stat = "identity")
occurrence %>%
group_by(SPECIES) %>%
summarise(n=n()) %>%
ggplot(aes(x= SPECIES, y = n ))+
geom_bar(stat = "identity")
occurrence %>%
group_by(SPECIES) %>%
summarise(n=n()) %>%
ggplot(aes(x= SPECIES, y = n ))+
geom_bar(stat = "identity")+
coord_flip()
occurrence %>%
group_by(SPECIES) %>%
summarise(n=n()) %>%
ggplot(aes(x= SPECIES, y = n , alpha = 0.5, col = "green"))+
geom_bar(stat = "identity")+
coord_flip()+
?order_by
occurrence %>%
group_by(SPECIES) %>%
order_by(SPECIES, cumsum(value)) %>%
summarise(n=n()) %>%
ggplot(aes(x= SPECIES, y = n))+
geom_bar(stat = "identity")+
coord_flip()+
occurrence %>%
group_by(SPECIES) %>%
order_by(SPECIES) %>%
summarise(n=n()) %>%
ggplot(aes(x= SPECIES, y = n))+
geom_bar(stat = "identity")+
coord_flip()+
library("dplyr")
library("dplyr")
occurrence %>%
group_by(SPECIES) %>%
order_by(SPECIES) %>%
summarise(n=n()) %>%
ggplot(aes(x= SPECIES, y = n))+
geom_bar(stat = "identity")+
coord_flip()+
?order_by
?cumsum
occurrence %>%
order_by(SPECIES, cumsum(SPECIES)) %>%
group_by(SPECIES) %>%
summarise(n=n()) %>%
ggplot(aes(x= SPECIES, y = n))+
geom_bar(stat = "identity")+
coord_flip()+
occurrence %>%
# order_by(SPECIES, cumsum(SPECIES)) %>%
group_by(SPECIES) %>%
summarise(n=n()) %>%
ggplot(aes(x= SPECIES, y = n))+
geom_bar(stat = "identity")+
coord_flip()+
occurrence %>%
group_by(SPECIES) %>%
summarise(n=n()) %>%
ggplot(aes(x= SPECIES, y = n))+
geom_bar(stat = "identity")+
coord_flip()
occurrence %>%
group_by(SPECIES) %>%
order_by(SPECIES, cumsum(SPECIES)) %>%
summarise(n=n()) %>%
ggplot(aes(x= SPECIES, y = n))+
geom_bar(stat = "identity")+
coord_flip()
?arrange
occurrence %>%
group_by(SPECIES) %>%
summarise(n=n()) %>%
arrange(n) %>%
ggplot(aes(x= SPECIES, y = n))+
geom_bar(stat = "identity")+
coord_flip()
occurrence %>%
group_by(SPECIES) %>%
summarise(n=n()) %>%
arrange(n)
occurrence %>%
group_by(SPECIES) %>%
summarise(n=n()) %>%
arrange(n) %>%
ggplot(aes(x= SPECIES, y = n))+
geom_bar(stat = "identity")+
coord_flip()
View(occurrence)
View(occurrence)
occurrence %>%
group_by(SPECIES) %>%
summarise(n=n()) %>%
arrange(n) %>%
ggplot(aes(x= SPECIES, y = n))+
geom_bar(stat = "identity")+
coord_flip()+
theme_minimal()
occurrence %>%
group_by(SPECIES) %>%
summarise(n=n()) %>%
arrange(n) %>%
ggplot(aes(x= SPECIES, y = n, alpha = 0.5, fill = "green"))+
geom_bar(stat = "identity")+
coord_flip()+
theme_minimal()
occurrence %>%
group_by(SPECIES) %>%
summarise(n=n()) %>%
arrange(n) %>%
ggplot(aes(x= SPECIES, y = n))+
geom_bar(stat = "identity",alpha = 0.5, fill = "green")+
coord_flip()+
theme_minimal()
group_by(SPECIES) %>%
summarise(n=n()) %>%
arrange(n)
occurrence %>%
group_by(SPECIES) %>%
summarise(n=n()) %>%
arrange(n)
occurrence %>%
group_by(SPECIES) %>%
summarise(n=n()) %>%
arrange(n) %>%
ggplot(aes(x= SPECIES, y = n))+
geom_bar(stat = "identity",alpha = 0.5, fill = "green")+
coord_flip()+
theme_minimal()
#sort.occurrence$SPECIES<- occurence$SPECIES[order(occurence$SPECIES) ,]
sort.occurrence$SPECIES <- occurrence$SPECIES[order(occurence$SPECIES) ,]
sort.occurrence$SPECIES <- occurrence$SPECIES[order(occurence$SPECIES) ,]
sort.occurrence$SPECIES <- occurrence$SPECIES[order(occurrence$SPECIES) ,]
occurrence %>%
group_by(SPECIES) %>%
summarise(n=n()) %>%
arrange(n)
occurrence %>%
group_by(SPECIES) %>%
summarise(n=n()) %>%
arrange(n) %>%
ggplot(aes(x= SPECIES, y = n))+
geom_bar(stat = "identity",alpha = 0.5, fill = "green")+
coord_flip()+
theme_minimal()
occurrence %>%
group_by(SPECIES) %>%
summarise(n=n()) %>%
arrange(n)
print(occurrence %>%
group_by(SPECIES) %>%
summarise(n=n()) %>%
arrange(n))
?order
#sort.species <- species[order()]
sort.species <- sort.list(occurrence$SPECIE)
sort.species
#sort.species <- species[order()]
sort.species <- order(occurrence$SPECIE)
sort.species
#sort.species <- species[order()]
sort.species <- order(occurrence$SPECIE, descreasing = TRUE)
head(sort.species)
dim(sort.species)
#sort.species <- species[order()]
sort.species <- occurrence$SPECIES[order(occurrence$SPECIE),]
#sort.species <- species[order()]
sort.species <- occurrence$SPECIES[order(occurrence$SPECIE),n]
head(sort.species)
#sort.species <- species[order()]
sort.species <- occurrence$SPECIES[order(occurrence$SPECIE)]
head(sort.species)
sort.species
#sort.species <- species[order()]
sort.species <- occurrence$SPECIES[order(n)]
occurrence$SPECIES <- as.factor(gsub("^\\s+|\\s+$", "", occurrence$SPECIES)) # Enlève les espaces superflus
occurrence %>%
group_by(SPECIES) %>%
summarise(n = n()) %>%
mutate(SPECIES = factor(SPECIES, levels = SPECIES[order(n)])) %>%
mutate(FAMILY = gsub(" .*$", "", SPECIES)) %>%
ggplot(aes(x= SPECIES, y = n, fill = FAMILY))+
geom_bar(stat = "identity",alpha = 0.5)+
coord_flip()+
theme_minimal()
library("RColorBrewer")
occurrence$SPECIES <- as.factor(gsub("^\\s+|\\s+$", "", occurrence$SPECIES)) # Enlève les espaces superflus
occurrence %>%
group_by(SPECIES) %>%
summarise(n = n()) %>%
mutate(SPECIES = factor(SPECIES, levels = SPECIES[order(n)])) %>%
mutate(FAMILY = gsub(" .*$", "", SPECIES)) %>%
ggplot(aes(x= SPECIES, y = n, fill = FAMILY))+
geom_bar(stat = "identity",alpha = 0.5)+
coord_flip()+
theme_minimal()+
scall_fill_manual = (brewer.pal(7, Dark2))
occurrence$SPECIES <- as.factor(gsub("^\\s+|\\s+$", "", occurrence$SPECIES)) # Enlève les espaces superflus
occurrence %>%
group_by(SPECIES) %>%
summarise(n = n()) %>%
mutate(SPECIES = factor(SPECIES, levels = SPECIES[order(n)])) %>%
mutate(FAMILY = gsub(" .*$", "", SPECIES)) %>%
ggplot(aes(x= SPECIES, y = n, fill = FAMILY))+
geom_bar(stat = "identity",alpha = 0.5)+
coord_flip()+
theme_minimal()+
scall_fill_manual = (brewer.pal(7, name = Dark2))
occurrence$SPECIES <- as.factor(gsub("^\\s+|\\s+$", "", occurrence$SPECIES)) # Enlève les espaces superflus
occurrence %>%
group_by(SPECIES) %>%
summarise(n = n()) %>%
mutate(SPECIES = factor(SPECIES, levels = SPECIES[order(n)])) %>%
mutate(FAMILY = gsub(" .*$", "", SPECIES)) %>%
ggplot(aes(x= SPECIES, y = n, fill = FAMILY))+
geom_bar(stat = "identity",alpha = 0.5)+
coord_flip()+
theme_minimal()+
scall_fill_manual = (brewer.pal(7, name = "Dark2"))
occurrence$SPECIES <- as.factor(gsub("^\\s+|\\s+$", "", occurrence$SPECIES)) # Enlève les espaces superflus
occurrence %>%
group_by(SPECIES) %>%
summarise(n = n()) %>%
mutate(SPECIES = factor(SPECIES, levels = SPECIES[order(n)])) %>%
mutate(FAMILY = gsub(" .*$", "", SPECIES)) %>%
ggplot(aes(x= SPECIES, y = n, fill = FAMILY))+
geom_bar(stat = "identity",alpha = 0.5)+
coord_flip()+
theme_minimal()+
scall_fill_manual = (brewer.pal(7, name = "Dark2"))
occurrence$SPECIES <- as.factor(gsub("^\\s+|\\s+$", "", occurrence$SPECIES)) # Enlève les espaces superflus
occurrence %>%
group_by(SPECIES) %>%
summarise(n = n()) %>%
mutate(SPECIES = factor(SPECIES, levels = SPECIES[order(n)])) %>%
mutate(FAMILY = gsub(" .*$", "", SPECIES)) %>%
ggplot(aes(x= SPECIES, y = n, fill = FAMILY))+
geom_bar(stat = "identity",alpha = 0.5)+
coord_flip()+
theme_minimal()+
scall_fill_manual((brewer.pal(7, name = "Dark2")))
occurrence$SPECIES <- as.factor(gsub("^\\s+|\\s+$", "", occurrence$SPECIES)) # Enlève les espaces superflus
occurrence %>%
group_by(SPECIES) %>%
summarise(n = n()) %>%
mutate(SPECIES = factor(SPECIES, levels = SPECIES[order(n)])) %>%
mutate(FAMILY = gsub(" .*$", "", SPECIES)) %>%
ggplot(aes(x= SPECIES, y = n, fill = FAMILY))+
geom_bar(stat = "identity",alpha = 0.5)+
coord_flip()+
theme_minimal()+
scale_fill_manual((brewer.pal(7, name = "Dark2")))
occurrence$SPECIES <- as.factor(gsub("^\\s+|\\s+$", "", occurrence$SPECIES)) # Enlève les espaces superflus
occurrence %>%
group_by(SPECIES) %>%
summarise(n = n()) %>%
mutate(SPECIES = factor(SPECIES, levels = SPECIES[order(n)])) %>%
mutate(FAMILY = gsub(" .*$", "", SPECIES)) %>%
ggplot(aes(x= SPECIES, y = n, fill = FAMILY))+
geom_bar(stat = "identity",alpha = 0.5)+
coord_flip()+
theme_minimal()+
scale_fill_manual(7,(brewer.pal(7, name = "Dark2")))
?brewer.pal
occurrence$SPECIES <- as.factor(gsub("^\\s+|\\s+$", "", occurrence$SPECIES)) # Enlève les espaces superflus
occurrence %>%
group_by(SPECIES) %>%
summarise(n = n()) %>%
mutate(SPECIES = factor(SPECIES, levels = SPECIES[order(n)])) %>%
mutate(FAMILY = gsub(" .*$", "", SPECIES)) %>%
ggplot(aes(x= SPECIES, y = n, fill = FAMILY))+
geom_bar(stat = "identity",alpha = 0.5)+
coord_flip()+
theme_minimal()+
scale_fill_manual((brewer.pal(n = 7, name = "Dark2")))
occurrence$SPECIES <- as.factor(gsub("^\\s+|\\s+$", "", occurrence$SPECIES)) # Enlève les espaces superflus
occurrence %>%
group_by(SPECIES) %>%
summarise(n = n()) %>%
mutate(SPECIES = factor(SPECIES, levels = SPECIES[order(n)])) %>%
mutate(FAMILY = gsub(" .*$", "", SPECIES)) %>%
ggplot(aes(x= SPECIES, y = n, fill = FAMILY))+
geom_bar(stat = "identity",alpha = 0.5)+
coord_flip()+
theme_minimal()+
scale_fill_brewer(palette = "Dark2")
occurrence$SPECIES <- as.factor(gsub("^\\s+|\\s+$", "", occurrence$SPECIES)) # Enlève les espaces superflus
occurrence %>%
group_by(SPECIES) %>%
summarise(n = n()) %>%
mutate(SPECIES = factor(SPECIES, levels = SPECIES[order(n)])) %>%
mutate(FAMILY = gsub(" .*$", "", SPECIES)) %>%
ggplot(aes(x= SPECIES, y = n, fill = FAMILY))+
geom_bar(stat = "identity")+
coord_flip()+
theme_minimal()+
scale_fill_brewer(palette = "Dark2")
